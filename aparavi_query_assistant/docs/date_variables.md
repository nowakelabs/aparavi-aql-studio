# Date Template Variables in AQL Queries

## Overview

The Aparavi Query Assistant now supports date template variables in AQL queries. These variables are automatically replaced with actual date values both in the library display and when a query is executed, making it easy to create dynamic queries without having to modify dates manually.

## Available Variables

The following date template variables are available:

| Variable | Description | Current Value (as of today) |
|----------|-------------|---------------------------|
| `{{TODAY}}` | Current date | 2025-03-31 |
| `{{DATE_MINUS_30_DAYS}}` | 1 month ago | 2025-02-28 |
| `{{DATE_MINUS_90_DAYS}}` | 3 months ago | 2024-12-31 |
| `{{DATE_MINUS_6_MONTHS}}` | 6 months ago | 2024-09-30 |
| `{{DATE_MINUS_1_YEAR}}` | 1 year ago | 2024-03-31 |
| `{{DATE_MINUS_2_YEARS}}` | 2 years ago | 2023-03-31 |
| `{{DATE_MINUS_3_YEARS}}` | 3 years ago | 2022-03-31 |
| `{{DATE_MINUS_5_YEARS}}` | 5 years ago | 2020-03-31 |
| `{{DATE_MINUS_7_YEARS}}` | 7 years ago | 2018-03-31 |
| `{{DATE_MINUS_10_YEARS}}` | 10 years ago | 2015-03-31 |

## Usage Example

Here's how to use date variables in your AQL queries:

```sql
-- Find files modified in the last 90 days
SELECT 
  name,
  modifyTime
FROM STORE('/') 
WHERE modifyTime >= '{{DATE_MINUS_90_DAYS}}'
LIMIT 10;
```

## Benefits

- **Maintainability**: No need to update hardcoded dates in queries
- **Consistency**: All queries use the same relative date calculations
- **Compliance**: Compatible with Aparavi API syntax requirements
- **Readability**: Clear what each date represents

## Implementation Details

### Query Execution

When a query is executed or validated, the AQL Assistant automatically:
1. Detects any template variables in the query
2. Calculates the current date values for each variable
3. Replaces the variables with actual date literals before sending to the Aparavi API

This happens transparently to users, who only need to write and maintain the template variables in their queries.

### Query Library Display

In the query library, date template variables are automatically processed when the page loads:
1. The query display shows the actual calculated dates instead of the template variables
2. This makes it easy to see what actual dates will be used in the query
3. When copying a query, you get the version with actual dates already filled in

### AI-Generated Queries

Queries generated by the AI through the main Query Assistant already use actual date literals rather than template variables, as the AI is instructed to provide concrete dates for better compatibility with the Aparavi API.
